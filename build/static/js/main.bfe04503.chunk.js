(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{190:function(e,t,n){},191:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(78),c=n.n(o),i=n(8);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(2),l=n(3),u=n(5),m=n(4),d=n(6),h=(n(87),n(12)),f=n(79);n(190);function p(e){var t=e.date,n=e.format,r=void 0===n?"Do MMMM YYYY":n;return Object(f.format)(t,r)}function g(){return a.a.createElement("span",{className:"Hyph"}," - ")}function E(e){var t=e.className,n=Object(h.a)(e,["className"]);return a.a.createElement("button",Object.assign({className:["Button",t].join(" ")},n))}function b(e){var t=e.className,n=Object(h.a)(e,["className"]);return a.a.createElement("input",Object.assign({className:["Input",t].join(" ")},n))}function v(e){var t=e.className,n=Object(h.a)(e,["className"]);return a.a.createElement("span",Object.assign({className:["Required",t].join(" ")},n),"*")}function y(e){var t=e.className,n=e.list,r=Object(h.a)(e,["className","list"]),o=["Section",n&&"Section--list",t].filter(Boolean).join(" ");return a.a.createElement("section",Object.assign({className:o},r))}var j="https://fast-meadow-83257.herokuapp.com",L="https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com",O="782f3744-105c-427b-b350-fdf24017ff9c",I="2162c8bd1amsh6643aaf16b0da06p1fa248jsnbc987518aef2",k={saveAuthToken:function(e){window.localStorage.setItem(O,e)},getAuthToken:function(){return window.localStorage.getItem(O)},clearAuthToken:function(){window.localStorage.removeItem(O)},hasAuthToken:function(){return!!k.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},N=k,_=(n(191),a.a.createContext({loggedIn:!1,userLoggedIn:{},error:null,groceryList:[],List:null,setError:function(){},clearError:function(){},logIn:function(){},logOut:function(){},setGroceryLists:function(){},setList:function(){}})),w=_,x=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={loggedIn:!1,userLoggedIn:{},error:null,groceryList:[],List:null},n.setError=function(e){console.error(e),n.setState({error:e})},n.clearError=function(){n.setState({error:null})},n.logIn=function(e){n.setState({loggedIn:!0,userLoggedIn:e})},n.logOut=function(){n.setState({loggedIn:!1,userLoggedIn:null})},n.setGroceryLists=function(e){n.setState({groceryList:e})},n.setList=function(e){n.setState({List:e})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={loggedIn:this.state.loggedIn,userLoggedIn:this.state.userLoggedIn,error:this.state.error,groceryList:this.state.groceryList,List:this.state.List,setError:this.setError,clearError:this.clearError,logIn:this.logIn,logOut:this.logOut,setGroceryLists:this.setGroceryLists,setList:this.setList};return a.a.createElement(_.Provider,{value:e},this.props.children)}}]),t}(r.Component),A=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).handleLogoutClick=function(){N.clearAuthToken().then(n.context.logOut)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderLogoutLink",value:function(){return console.log(this.context.userLoggedIn),a.a.createElement("div",{className:"Header__logged-in"},a.a.createElement("p",null,"Hello ",this.context.userLoggedIn.user_name,"!"),a.a.createElement(i.b,{onClick:this.handleLogoutClick,to:"/"},"Logout"))}},{key:"renderLoginLink",value:function(){return a.a.createElement("div",{className:"Header__not-logged-in"},a.a.createElement(i.b,{to:"/register"},"Register"),a.a.createElement(g,null),a.a.createElement(i.b,{to:"/login"},"Log in"))}},{key:"render",value:function(){return a.a.createElement("nav",{className:"Header"},a.a.createElement("h1",null,a.a.createElement(i.b,{to:"/"},a.a.createElement("div",{className:"Title"},"Grocery Helper"))),!0===this.context.loggedIn?this.renderLogoutLink():this.renderLoginLink())}}]),t}(r.Component);A.contextType=w;var S=n(17);function T(e){var t=e.component,n=Object(h.a)(e,["component"]),r=t;return a.a.createElement(S.b,Object.assign({},n,{render:function(e){return N.hasAuthToken()?a.a.createElement(r,e):a.a.createElement(S.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function P(e){var t=e.component,n=Object(h.a)(e,["component"]),r=t;return a.a.createElement(S.b,Object.assign({},n,{render:function(e){return N.hasAuthToken()?a.a.createElement(S.a,{to:"/"}):a.a.createElement(r,e)}}))}var C={postUser:function(e){return fetch("".concat(j,"/api/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},postLogin:function(e){return fetch("".concat(j,"/api/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return e})}},F={getUsers:function(){return fetch("".concat(j,"/api/users"),{method:"GET",headers:{authorization:"bearer ".concat(N.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})}},B=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={error:null},n.handleSubmitBasicAuth=function(e){e.preventDefault();var t=e.target,r=t.user_name,a=t.password;console.log("login form submitted");var o=window.btoa("".concat(r.value,":").concat(a.value));C.postLogin({user_name:r.value,password:a.value}).then(function(){return N.saveAuthToken(o),F.getUsers()}).then(function(e){return e.find(function(e){return e.user_name===r.value})}).then(function(e){return n.context.logIn(e)}).then(function(){r.value="",a.value="",n.props.onLoginSuccess()}).catch(function(e){n.setState({error:e.error})})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.error;return a.a.createElement("form",{className:"LoginForm",onSubmit:this.handleSubmitBasicAuth},a.a.createElement("div",{role:"alert"},e&&a.a.createElement("p",{className:"red"},e)),a.a.createElement("div",{className:"user_name"},a.a.createElement("label",{htmlFor:"LoginForm__user_name"},"User name"),a.a.createElement(b,{required:!0,name:"user_name",id:"LoginForm__user_name"})),a.a.createElement("div",{className:"password"},a.a.createElement("label",{htmlFor:"LoginForm__password"},"Password"),a.a.createElement(b,{required:!0,name:"password",type:"password",id:"LoginForm__password"})),a.a.createElement(E,{type:"submit"},"Log in"))}}]),t}(r.Component);B.defaultProps={onLoginSuccess:function(){}},B.contextType=w;var R=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).handleLoginSuccess=function(){n.props.history.push("/")},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(y,{className:"LoginPage"},a.a.createElement("h2",null,"Log in"),a.a.createElement(B,{onLoginSuccess:this.handleLoginSuccess}))}}]),t}(r.Component);R.defaultProps={location:{},history:{push:function(){}}};var M=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={error:null},n.handleSubmit=function(e){e.preventDefault();var t=e.target,r=t.full_name,a=t.email,o=t.user_name,c=t.password;console.log("registration form submitted"),n.setState({error:null}),C.postUser({user_name:o.value,password:c.value,email:a.value,full_name:r.value}).then(function(){n.login(o.value,c.value)}).catch(function(e){n.setState({error:e.error})})},n.login=function(e,t){var r=window.btoa("".concat(e,":").concat(t));C.postLogin({user_name:e,password:t}).then(function(){return N.saveAuthToken(r),F.getUsers()}).then(function(t){return t.find(function(t){return t.user_name===e})}).then(function(e){return n.context.logIn(e)}).then(function(){n.props.onRegistrationSuccess()}).catch(function(e){n.setState({error:e.error})})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.error;return a.a.createElement("form",{className:"RegistrationForm",onSubmit:this.handleSubmit},a.a.createElement("div",{role:"alert"},e&&a.a.createElement("p",{className:"red"},e)),a.a.createElement("div",{className:"full_name"},a.a.createElement("label",{htmlFor:"RegistrationForm__full_name"},"Full name ",a.a.createElement(v,null)),a.a.createElement(b,{name:"full_name",type:"text",required:!0,id:"RegistrationForm__full_name"})),a.a.createElement("div",{className:"email"},a.a.createElement("label",{htmlFor:"RegistrationForm__email"},"Email",a.a.createElement(v,null)),a.a.createElement(b,{name:"email",type:"mail",required:!0,id:"RegistrationForm__email"})),a.a.createElement("div",{className:"user_name"},a.a.createElement("label",{htmlFor:"RegistrationForm__user_name"},"User name ",a.a.createElement(v,null)),a.a.createElement(b,{name:"user_name",type:"text",required:!0,id:"RegistrationForm__user_name"})),a.a.createElement("div",{className:"password"},a.a.createElement("label",{htmlFor:"RegistrationForm__password"},"Password ",a.a.createElement(v,null)),a.a.createElement(b,{name:"password",type:"password",required:!0,id:"RegistrationForm__password"})),a.a.createElement(E,{type:"submit"},"Register"))}}]),t}(r.Component);M.contextType=w,M.defaultProps={onRegistrationSuccess:function(){}};var D=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).handleRegistrationSuccess=function(){n.props.history.push("/")},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(y,{className:"RegistrationPage"},a.a.createElement("h2",null,"Register"),a.a.createElement(M,{onRegistrationSuccess:this.handleRegistrationSuccess}))}}]),t}(r.Component);D.defaultProps={location:{},history:{push:function(){}}};var q=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(y,{className:"NotFoundPage"},a.a.createElement("h2",null,"404 - Page not found"),a.a.createElement("p",null,"Try going back to your previous page."))}}]),t}(r.Component),G={getItems:function(){return fetch("".concat(j,"/items"),{headers:{authorization:"bearer ".concat(N.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},getItem:function(e){return fetch("".concat(j,"/items/").concat(e),{headers:{}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},addItem:function(e){return fetch("".concat(j,"/items"),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(N.getAuthToken())},body:JSON.stringify({id:e.id,title:e.title,quantity:e.quantity,date_created:e.date_created,listid:e.listid})}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},deleteItem:function(e){return fetch("".concat(j,"/items/").concat(e.id),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(N.getAuthToken())}})}},U=(n(200),n(18)),H=a.a.createContext({item:{},error:null,setError:function(){},clearError:function(){},setItem:function(){},clearItem:function(){},setItems:function(){},addItem:function(){}}),z=H,W=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={item:{},error:null},n.setError=function(e){console.error(e),n.setState({error:e})},n.clearError=function(){n.setState({error:null})},n.setItem=function(e){n.setState({item:e})},n.clearItem=function(){n.setItems([])},n.setItems=function(e){n.setState({items:e})},n.addItem=function(e){n.setItems([].concat(Object(U.a)(n.state.items),[e]))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={item:this.state.item,error:this.state.error,setError:this.setError,clearError:this.clearError,setItem:this.setItem,clearItem:this.clearItem,setItems:this.setItems,addItem:this.addItem};return a.a.createElement(H.Provider,{value:e},this.props.children)}}]),t}(r.Component),J=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.itemId;this.context.clearError(),G.getItem(e).then(this.context.setItem).catch(this.context.setError)}},{key:"componentWillUnmount",value:function(){this.context.clearItem()}},{key:"renderItem",value:function(){var e=this.context,t=e.item,n=e.quantity;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,t.title),a.a.createElement("p",null,a.a.createElement(g,null),a.a.createElement(p,{date:t.date_created})),a.a.createElement(Y,{quantity:n}))}},{key:"render",value:function(){var e,t=this.context,n=t.error,r=t.item;return e=n?"Item doesn't exist"===n.error?a.a.createElement("p",{className:"red"},"Item not found"):a.a.createElement("p",{className:"red"},"There was an error"):r.id?this.renderItem():a.a.createElement("div",{className:"loading"}),a.a.createElement(y,{className:"ItemPage"},e)}}]),t}(r.Component);function Y(e){var t=e.items,n=void 0===t?[]:t;return a.a.createElement("ul",{className:"ItemPage__item-list"},n.map(function(e){return a.a.createElement("li",{key:e.id,className:"ItemPage__item"},a.a.createElement("p",{className:"ItemPage__item-text"},e.text),a.a.createElement("p",{className:"ItemPage__item-user"},e.user.full_name))}))}J.contextType=z;var X={getLists:function(){return fetch("".concat(j,"/api/lists"),{method:"GET",headers:{authorization:"bearer ".concat(N.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},getList:function(e){return fetch("".concat(j,"/api/lists/").concat(e),{headers:{authorization:"bearer ".concat(N.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},addList:function(e){return fetch("".concat(j,"/api/lists"),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(N.getAuthToken())},body:JSON.stringify({title:e.title,userid:e.userid})}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},deleteList:function(e){return fetch("".concat(j,"/api/lists/").concat(e.id),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(N.getAuthToken())}})}},K=(n(201),function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).handleDeleteItem=function(e){var t=n.context.groceryList.filter(function(t){return t!==e});n.context.setGroceryLists(t),X.deleteList(e)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.item;return a.a.createElement("div",{className:"AllLists"},a.a.createElement(i.b,{to:"/list/".concat(t.id),className:"ListById"},a.a.createElement("header",{className:"ListById__header"},a.a.createElement("h2",{className:"ListById__heading"},t.title),a.a.createElement($,{item:t}))),a.a.createElement("main",null,a.a.createElement("button",{className:"deleteButton",onClick:function(n){n.stopPropagation(),e.handleDeleteItem(t)},type:"button"},"delete")))}}]),t}(r.Component));function $(e){var t=e.item;return a.a.createElement("span",{className:"List__date"},a.a.createElement(p,{date:t.date_created}))}K.contextType=w;var Q=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;return this.context.clearError(),X.getLists().then(function(t){return t.filter(function(t){return t.userid===e.context.userLoggedIn.id})}).then(function(t){return e.context.setGroceryLists(t)}),X.getLists().catch(function(t){e.context.setError(t)})}},{key:"renderFullList",value:function(){return this.context.groceryList.map(function(e){return a.a.createElement(K,{key:e.id,item:e})})}},{key:"render",value:function(){var e=this.context.error;return a.a.createElement(y,{className:"ListPage"},e?a.a.createElement("p",{className:"red"},"There was an error, try again"):this.renderFullList())}}]),t}(r.Component);Q.contextType=w;n(202),n(203);var V=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("span",{className:"Tooltip"},a.a.createElement("span",{className:"Tooltip-content",style:{color:this.props.color}},this.props.children),a.a.createElement("div",{className:"Tooltip-message"},this.props.message))}}]),t}(a.a.Component);V.defaultProps={color:"#01A800"};var Z=V,ee=a.a.createElement(Z,{color:"blue",message:"Register and Login are in the top right corner of your screen"},"above"),te=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderUserLists",value:function(){return a.a.createElement("div",{className:"UserGroceryLists"},a.a.createElement(Q,{className:"AllGroceryLists"}))}},{key:"renderStartNewList",value:function(){return a.a.createElement("div",{className:"CreateNewList"},a.a.createElement(i.b,{to:"/addList",className:"LinkToNewList"},"Start New List"))}},{key:"render",value:function(){return a.a.createElement("div",{className:"Nav"},a.a.createElement("div",{id:"root"},a.a.createElement(y,{className:"MainPage"},a.a.createElement("h2",null,"Welcome to the Grocery Helper!"),a.a.createElement("section",{className:"MainParagraph"},a.a.createElement("p",null,"This is your new tool to give your shopping list some depth!")," ",!1===this.context.loggedIn?a.a.createElement("section",null,"Register or login ",ee," to begin creating your new and advanced lists!"):a.a.createElement("p",null,'Click on "Start New List" to begin using the Grocery Helper,'," ","or select one of the lists you've already made to continue adding to it!"))),N.hasAuthToken()?this.renderStartNewList():null,a.a.createElement("br",null),N.hasAuthToken()?this.renderUserLists():null))}}]),t}(r.Component);te.contextType=w;n(204);var ne=function(e){return new Array(e).fill(null,0,e)};function re(e){var t=6.5*Math.random()+e.num%4+.6,n=900*Math.random(),r=300*Math.random(),o=960*Math.random(),c=750*Math.random(),i=90*Math.random();return a.a.createElement("g",{style:{animation:"up ".concat(t,"s ").concat(n,"ms infinite")}},a.a.createElement("g",{transform:"translate(".concat(r," ").concat(o,")"),style:{transform:"translateX(".concat(c,"px)")}},a.a.createElement("circle",{cx:"35",cy:"35",r:"".concat(i)})))}function ae(e){return a.a.createElement("div",{className:"bubbles-container"},a.a.createElement("svg",{className:"bubbles",viewBox:"0 0 701 1024",style:{overflow:"visible"}},a.a.createElement("g",{className:"bubbles-small",strokeWidth:"7"},e.children)))}function oe(e){var t=ne(e.numberOfBubbles).map(function(e,t){return a.a.createElement(re,{key:t,num:t})});return a.a.createElement(ae,null,t)}var ce=a.a.createContext({itemList:[],listId:null,error:null,setError:function(){},clearError:function(){},setListId:function(){},setItemList:function(){}}),ie=ce,se=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={itemList:[],listId:null,error:null},n.setError=function(e){console.error(e),n.setState({error:e})},n.clearError=function(){n.setState({error:null})},n.setListId=function(e){n.setState({listId:e})},n.setItemList=function(e){n.setState({itemList:e})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={itemList:this.state.itemList,listId:this.state.listId,error:this.state.error,setError:this.setError,clearError:this.clearError,setListId:this.setListId,setItemList:this.setItemList};return a.a.createElement(ce.Provider,{value:e},this.props.children)}}]),t}(r.Component),le=(n(205),function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).handleDeleteItem=function(e){var t=n.context.itemList.filter(function(t){return t!==e});n.context.setItemList(t),G.deleteItem(e)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.item;return a.a.createElement("div",{className:"ItemListWholeItem"},a.a.createElement(i.b,{to:"/item/".concat(t.id),className:"ItemListItem"},a.a.createElement("header",{className:"ItemListItem__header"},a.a.createElement("h2",{className:"ItemListItem__heading"},t.title),a.a.createElement("h2",{className:"ItemListItem__quantity"},t.quantity),a.a.createElement(ue,{item:t}))),a.a.createElement("main",null,a.a.createElement("button",{className:"deleteButton",onClick:function(n){n.stopPropagation(),e.handleDeleteItem(t)},type:"button"},"delete")))}}]),t}(r.Component));function ue(e){var t=e.item;return a.a.createElement("span",{className:"ItemListItem__date"},a.a.createElement(p,{date:t.date_created}))}le.contextType=ie;var me={getItems:function(e){return fetch("".concat(L,"/food/products/search?offset=0&query=").concat(e,"&number=2"),{headers:{"X-RapidAPI-Key":"".concat(I)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})},getItem:function(e){return fetch("".concat(L,"/food/products/").concat(e),{headers:{"content-type":"application/json","X-RapidAPI-Key":"".concat(I)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})})}},de=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.item;return console.log(this.props),a.a.createElement("div",{className:"AllProducts"},a.a.createElement("header",{className:"AllProducts__header"},a.a.createElement("h2",{className:"AllProducts__heading"},e.title),a.a.createElement("h2",{className:"AllProducts__price"},e.price),a.a.createElement("h3",{className:"AllProducts__content"},e.nutrition)))}}]),t}(r.Component),he=a.a.createContext({products:null,itemListById:[],setProducts:function(){},setItemList:function(){}}),fe=he,pe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={products:null,itemListById:[]},n.setItemList=function(e){n.setState({itemList:e})},n.setProducts=function(e){var t=e.products;n.setState({products:t})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={products:this.state.products,itemListById:this.state.itemListById,setProducts:this.setProducts,setItemList:this.setItemList};return a.a.createElement(he.Provider,{value:e},this.props.children)}}]),t}(r.Component),ge=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={readyToSubmit:!1},n.onSubmitForm=function(e){e.preventDefault(),!1===n.state.readyToSubmit?n.handleCheckForm(e):n.handleAddItem(e)},n.handleAddItem=function(e){n.props.onAddItem(e.target.itemToAdd.value,e.target.quantityToAdd.value)},n.handleCheckForm=function(e){return e.preventDefault(),console.log(me.getItems(e.target.itemToAdd.value)),me.getItems(e.target.itemToAdd.value).then(function(e){return n.context.setProducts({products:e})})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderProducts",value:function(){var e=this;console.log(this.context.products);var t=this.context.products.products.map(function(e){return e.id});console.log(t);for(var n=0;n<t.length;n++)me.getItem(t[n]).then(function(t){console.log(t),e.context.itemListById.push(t)});return console.log(this.context.itemListById),this.context.itemListById.map(function(e){return a.a.createElement(de,{key:e.id,item:e})})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.onSubmitForm},a.a.createElement("input",{name:"itemToAdd",type:"text",placeholder:"apples","aria-label":"Shopping list item"}),a.a.createElement("input",{name:"quantityToAdd",type:"number",placeholder:"0",min:"0"}),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return e.setState({readyToSubmit:!1})},name:"submitButton"},"Check For Item"),a.a.createElement(y,{className:"ProductList"},null===this.context.products?null:this.renderProducts()),a.a.createElement("button",{onClick:function(){return e.setState({readyToSubmit:!0})},name:"submitButton"},"Add Item")))}}]),t}(a.a.Component);ge.contextType=fe;var Ee=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).handleAddItem=function(e,t){var r={id:1e3*Math.random(),title:e,quantity:t,date_created:new Date,listid:n.props.listId},a=[].concat(Object(U.a)(n.context.itemList),[r]);n.context.setItemList(a),G.addItem(r)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.clearError(),G.getItems().then(function(t){return t.filter(function(t){return t.listid==e.props.listId})}).then(function(t){return e.context.setItemList(t)}).catch(function(t){return e.context.setError(t)})}},{key:"renderItems",value:function(){var e=this.context.itemList;return(void 0===e?[]:e).map(function(e){return a.a.createElement(le,{key:e.id,item:e})})}},{key:"render",value:function(){var e=this.context.error;return a.a.createElement(y,{className:"ItemListPage"},a.a.createElement("section",null,a.a.createElement(ge,{onAddItem:this.handleAddItem})),e?a.a.createElement("p",{className:"red"},"There was an error, try again"):this.renderItems())}}]),t}(r.Component);Ee.contextType=ie;var be=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={loaded:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.listId;this.context.clearError(),X.getList(t).then(function(t){return e.context.setList(t)}).catch(this.context.setError),this.setState({loaded:!0})}},{key:"componentWillUnmount",value:function(){this.context.clearError()}},{key:"renderList",value:function(){var e=this.context.List,t=this.props.match.params.listId;return e?a.a.createElement("div",{className:"List_Content"},a.a.createElement("h2",null,e.title),a.a.createElement("p",null,a.a.createElement(g,null),a.a.createElement(p,{date:e.date_created})),a.a.createElement(Ee,{listId:t})):a.a.createElement("div",{className:"loading"})}},{key:"render",value:function(){var e,t=this.context,n=t.error,r=t.List;return e=n?"List doesn't exist"===n.error?a.a.createElement("p",{className:"red"},"Item not found"):a.a.createElement("p",{className:"red"},"There was an error"):r?this.renderList():a.a.createElement("div",{className:"loading"}),a.a.createElement(y,{className:"ListPage"},e)}}]),t}(r.Component);be.contextType=w;var ve=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).onSubmitForm=function(e){e.preventDefault();var t={title:e.target.newListTitle.value,userid:n.context.userLoggedIn.id};X.getLists().then(function(e){n.context.setGroceryLists([].concat(Object(U.a)(e),[t]))}),X.addList(t),X.getLists().then(function(e){return e.filter(function(e){return e.userid===t.userid})}).then(function(e){return e.find(function(e){return e.title===t.title})}).then(function(e){return e.id}).then(function(e){return n.props.history.push("/list/".concat(e))})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.clearError(),X.getLists().then(function(t){e.context.setGroceryLists(t)}).catch(function(t){e.context.setError(t)})}},{key:"render",value:function(){return a.a.createElement("form",{onSubmit:this.onSubmitForm},a.a.createElement("h2",null,"Give your new list a name!"),a.a.createElement("input",{name:"newListTitle",type:"text",placeholder:"Dinners for the week",required:!0}),a.a.createElement("button",{type:"submit"},"Add Title"))}}]),t}(r.Component);ve.defaultProps={location:{},history:{push:function(){}}},ve.contextType=w;var ye=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"AppHeader"},a.a.createElement(A,{hasLoggedIn:N.hasAuthToken()})),a.a.createElement("main",{className:"AppMain"},a.a.createElement(oe,{numberOfBubbles:60}),a.a.createElement(S.d,null,a.a.createElement(S.b,{exact:!0,path:"/",component:te,className:"MainPage"}),a.a.createElement(P,{path:"/login",component:R}),a.a.createElement(P,{path:"/register",component:D}),a.a.createElement(T,{path:"/item/:itemId",component:J}),a.a.createElement(T,{path:"/list/:listId",component:be}),a.a.createElement(T,{path:"/addList",component:ve}),a.a.createElement(S.b,{component:q}))))}}]),t}(r.Component);n(206);c.a.render(a.a.createElement(i.a,null,a.a.createElement(x,null,a.a.createElement(se,null,a.a.createElement(pe,null,a.a.createElement(W,null,a.a.createElement(ye,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},82:function(e,t,n){e.exports=n(207)},87:function(e,t,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.bfe04503.chunk.js.map